<!DOCTYPE html>

<html>

<head>
    <title>Graph</title>
     <script type="text/javascript" src="libs/jquery.js"></script>
    <script type="text/javascript" src="libs/three.js"></script>
    <script type="text/javascript" src="libs/TrackballControls.js"></script>
</head>
<body>

<div style="display:none;">
    <canvas id="text-container">
    </canvas>
</div>

<div id="graph">
</div>

<script type="text/javascript" src="andrew-threejs.js"></script>
<script type="text/javascript" src="main.js"></script>
<script type="text/javascript">
    var test;
    var clock;
    var camera;
    var scene;
    var objectsContainer=[];

    function init() {
        clock = new THREE.Clock();
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        var webGLRenderer = new THREE.WebGLRenderer();
        webGLRenderer.setClearColor(new THREE.Color(0xFFFFFF, 1.0));
        webGLRenderer.setSize(window.innerWidth, window.innerHeight);
        webGLRenderer.shadowMapEnabled = true;

        camera.position.x = 0;
        camera.position.y = 0;
        camera.position.z = 100;
        camera.lookAt(new THREE.Vector3(0, 0, 0));

        var trackballControls = new THREE.TrackballControls(camera);
        trackballControls.rotateSpeed = 0.5;
        trackballControls.zoomSpeed = 1.0;
        trackballControls.panSpeed = 1.0;
        trackballControls.staticMoving = false;


        var json=
{"companies": 
[
{
"id": "1", 
"name": ["Chong Kin (HK) Enterprise Co.", "Chong Kin Electronics"], 
"address": ["24F Hua Ming Ge Nan H, Shenzhen, China, 518032", "23B, Block A,Duhui Mansion ZhongHang Rd.,ShenZhen China", "Flat Front 2/F 10 Apliu Street Shamshuipo Ki"], 
"website": "",
"email": ["Chongkin1998@hotmail.com", "chongkin007@hotmail.com"], 
"telephone": ["852-24724062", "0086 755 83686419", "86-755-93664839"],
"qq": ["1765060718"],
"employee": [],
"bank": {"bankname": "Bank of China (HK) Limited", "account#": "01287792056316","bankaddress": "108 Cheung Sha Wan Road, Kowloon, HK", "swfitcode":""},
"type": "Chinese Seller"
}  ,
{
"id": "2", 
"name": ["HK Potential Electronics", "HK WEIKU TECHNOLOGY COMPANY LIMITED"], 
"address": ["30A JingHai Garden of Fuhua Road of FuTian district 518033"], 
"website": "",
"email": ["jane@hkpotnetial.com", "ben@hkpotential.com", "janehkpotentia189@hotmail.com", "judy@hkpotential.com"], 
"telephone": ["86-731-82751003", "15802536432", "86-755-83676710", "86-731-82751003","15802536432","86-755-83676710","86-731-83880775","86-156-16179698","86-156-16179698"],
"qq": [],
"employee": [],
"bank": {"bankname": "HSBC", "account#": "848-079000-838", "bankaddress":  "Head office 1 Queen's Road Central HongKong","swiftcode": "HSBCHKHHHKH"},
"type": "Chinese Seller"
} ,

{
"id": "3", 
"name": ["V&C Technology"], 
"address": ["15250 Flight Path Dr, Brooksville, FL 34604"], 
"website" : ["http://vctechnologyinc.com/",
"http://www.vctechnologyinc.org/",
"https://vctechnologyinc.wordpress.com",
"https://www.flickr.com/people/vc-technology-inc/",
"https://www.facebook.com/vcdisplays",
"https://plus.google.com/114562203059553648818?prsrc=3", 
"https://www.linkedin.com/company/v&c-technology-inc." ,"https://twitter.com/#!/vcdisplays","https://www.youtube.com/results?search_query=vcdisplays"],
"email": ["sales@vctechnologyinc.com","rob@vctechnologyinc.com"], 
"telephone": ["(352) 796-0060",  "352-796-0790", "352-796-0401"],
"qq": [],
"employee": [
"Greg Potter",
"Rob Bauer", 
"Mike Smith",
"Allen Rothey",
"Charlotte Carter" ,"Dorothy"],
"bank": {"bankname": "Bank of America", "account#": "848-079000-838", "bankaddress":  "FL, 34617","swiftcode": ""},
"type": "US Seller"
} ,

{
"id": "4", 
"name": ["Tri-Tech International"], 
"address": ["15250 Flight Path Dr, Brooksville, FL 34604"], 
"website" : ["http://vctechnologyinc.com/",
"http://www.vctechnologyinc.org/",
"https://vctechnologyinc.wordpress.com",
"https://www.flickr.com/people/vc-technology-inc/",
"https://www.facebook.com/vcdisplays",
"https://plus.google.com/114562203059553648818?prsrc=3", 
"https://www.linkedin.com/company/v&c-technology-inc." ,"https://twitter.com/#!/vcdisplays","https://www.youtube.com/results?search_query=vcdisplays"],
"email": ["sales@vctechnologyinc.com","rob@vctechnologyinc.com"], 
"telephone": ["(352) 796-0060",  "352-796-0790", "352-796-0401"],
"qq": [],
"employee": [
"Greg Potter",
"Rob Bauer", 
"Mike Smith",
"Allen Rothey",
"Charlotte Carter" ,"Dorothy"],
"bank": {"bankname": "Bank of America", "account#": "848-079000-838", "bankaddress":  "FL, 34617","swiftcode": ""},
"type": "US Seller"
}
]
,

"products": 
[ 
{"id": 5,
"manufactor": "Xilinx", 
"part #": "XCV1000-5BG560I", 
"device type": "FPGA", 
"package": "Virtex 1"
} ,

{"id": 6,
"manufactor": "Xilinx", 
"part #": "XC6SLX75-2FG676I", 
"device type": "FPGA", 
"package": "Spartan 6"
} ,

{"id": 7,
"manufactor": "Xilinx", 
"part #": "XQ4028EX-4HQ240N", 
"device type": "FPGA", 
"package": "Rad Hard 4000 series FPGA"
} ,

{"id": 8,
"manufactor": "Xilinx", 
"part #": "XC2S200-5FG456I", 
"device type": "FPGA", 
"package": "Spartan 2 FPGA"
},
{"id": 9,
"manufactor": "Xilinx", 
"part #": "XC4010E-3PQ208I", 
"device type": "FPGA", 
"package": "4000 Series FPGA"
} ,
{"id": 10,
"manufactor": "Xilinx", 
"part #": "XC4VLX100-11FF1148I", 
"device type": "FPGA", 
"package": "Virtex 4 without PowerPC (LX = Logic)"
}
]

,

"links": 
[ 
{"linkid": 1001,
"sourceid": "1",
"destid": "5"
} ,

{"linkid": 1002,
"sourceid": "1",
"destid": "6"
} ,

{"id": 1003,
"sourceid": "2",
"destid": "7"
} ,

{"id": 1004,
"sourceid": "2",
"destid": "8"
},
{"id": 1005,
"sourceid": "3",
"destid": "5"
} ,
{"id": 1006,
"sourceid": "3",
"destid": "7"
},
{"id": 1007,
"sourceid": "4",
"destid": "8"
},
{"id": 1008,
"sourceid": "4",
"destid": "6"
},
{"id": 1009,
"sourceid": "3",
"destid": "6"
}
]
};
        
        console.log(json);
        console.log(json["links"]);

        objectsContainer=andrewThree.objectsContainer();        

        var createObjects=function (){
            createCompanies(json["companies"],objectsContainer);
            createProducts(json["products"],objectsContainer);
            createLinks(json["links"],objectsContainer);
        }
        $.when(createObjects()).then(function(){
            objectsContainer.addTo(scene);
        });

        document.getElementById("graph").appendChild(webGLRenderer.domElement);

        render();

        function render() {
            requestAnimationFrame(render);
            webGLRenderer.render(scene, camera);

            var delta = clock.getDelta();
            trackballControls.update(delta);

            //test.render();
        }
    }
    window.onload = init;
</script>


</body>
</html>
